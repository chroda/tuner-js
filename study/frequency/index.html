
<canvas id="canvas" width="1024" height="300"></canvas>

<script>
  const audioContext = new window.AudioContext();
  const analyser = audioContext.createAnalyser();

  navigator.getUserMedia(
    {audio: true},
    stream => audioContext.createMediaStreamSource(stream).connect(analyser),
    err => console.log(err)
  );

  const dataArray = new Uint8Array(analyser.frequencyBinCount);

  const canvasContext = document.getElementById('canvas').getContext('2d');
  canvasContext.fillStyle = 'firebrick';

  setTimeout(() => {
    console.log(dataArray);

    analyser.getByteTimeDomainData(dataArray);

    dataArray.forEach((item, i) => {
      canvasContext.fillRect(i, item, 1, 1);
    });
  }, 300);
</script>

